---
import Head from "@components/Head.astro";
import Header from "@components/Header.astro";
import MobileMenuOverlay from "@components/header/MobileMenuOverlay.astro";
import Scanlines from "@components/Scanlines.astro";
import GridOverlay from "@components/GridOverlay.astro";
import Footer from "@components/Footer.astro";
import { SITE } from "@consts";
import type { Locale } from "@lib/i18n";

type Props = {
  title: string;
  description: string;
  lang?: Locale;
  gridOpacity?: number;
  className?: string;
};
const { title, description, lang = 'es', gridOpacity = 0, className = '' } = Astro.props;
---

<!doctype html>
<html lang={lang} class="dark">
  <head>
    <Head title={`${title} | ${SITE.NAME}`} description={description} lang={lang} />
  </head>
  <body class="bg-obsidian text-content font-display antialiased min-h-screen selection:bg-primary selection:text-white">
    <!-- Grid Background Overlay -->
    <GridOverlay opacity={gridOpacity} />
    <Scanlines />
    
    <!-- Mobile Menu Overlay (Outside Main Container to avoid stacking contexts if possible, or just direct body child) -->
    <MobileMenuOverlay lang={lang} currentPath={Astro.url.pathname} />

    <!-- Main Container -->
    <Header lang={lang} currentPath={Astro.url.pathname} />
    
    <div class="main-container">
      <main class="flex-1">
        <div class={`pt-20 md:pt-32 pb-20 px-4 md:px-10 max-w-[1200px] mx-auto w-full flex flex-col items-center relative z-10 ${className}`}>
          <slot />
        </div>
      </main>
    </div>

    <Footer lang={lang} />
  </body>
</html>
