---
import MinimalLayout from "@layouts/MinimalLayout.astro";
import { type Locale } from "@lib/i18n";
import { UI_TEXT } from "@data/ui-text";
import GuardianOverlay from "@components/home/GuardianOverlay.astro";
import HomeHeader from "@components/home/HomeHeader.astro";
import HomeMain from "@components/home/HomeMain.astro";
import HomeFooter from "@components/home/HomeFooter.astro";

import { getLangStaticPaths } from "@lib/static-paths";

export const getStaticPaths = getLangStaticPaths;

const { lang } = Astro.params as { lang: Locale };
const text = UI_TEXT[lang];
---

<MinimalLayout title={text.hero.role} description={text.hero.sub} lang={lang} bodyClass="home-body text-white font-body overflow-x-hidden min-h-screen flex flex-col py-4 md:pt-6 md:pb-3 lg:pt-16 lg:pb-8 md:justify-center relative">
  
  <style is:global>
      .home-body {
          background-color: #1A1A1A;
          background-image: linear-gradient(to top, rgba(171, 42, 62, 0.25) 0%, rgba(26, 26, 26, 1) 50%);
          background-attachment: fixed;
      }
  </style>

  <style>
    @media (max-width: 768px) {
        /* Any page-level overrides if needed, though most styles are now in components */
    }
    
    /* Global classes used by child components but defined here for context or moved */
    /* .corner-cut is used by HomeCard and Portrait */
    :global(.corner-cut) {
        clip-path: polygon(
            20% 0, 100% 0, 
            100% 80%, 80% 100%, 
            0 100%, 0 20%
        );
    }
    
    /* .ember-pulse is used by Portrait in HomeMain */
    :global(.ember-pulse) {
        position: absolute;
        width: 160%;
        height: 160%;
        background: radial-gradient(circle, rgba(171, 42, 62, 0.25) 0%, rgba(171, 42, 62, 0) 70%);
        z-index: -1;
        pointer-events: none;
        animation: pulse-ember 4s infinite ease-in-out;
    }

    @keyframes pulse-ember {
        0% { transform: scale(0.95); opacity: 0.5; }
        50% { transform: scale(1.05); opacity: 0.8; }
        100% { transform: scale(0.95); opacity: 0.5; }
    }
  </style>

    <GuardianOverlay />
    
    <HomeHeader lang={lang} />
    
    <HomeMain lang={lang} />

    <HomeFooter lang={lang} />
  
</MinimalLayout>
