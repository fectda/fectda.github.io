---
import { CV_URLS } from "@data/constants";
import type { Locale } from "@lib/i18n";

interface Props {
  lang: Locale;
}

const { lang } = Astro.props;
---

<div class="flex gap-2">
    <!-- Download CV -->
    <a href={CV_URLS[lang]} target="_blank" class="bg-panel-border hover:bg-primary/20 text-white p-2 rounded-sm border border-primary/30 transition-all hover:shadow-glow flex items-center justify-center" title="Download CV">
        <span class="material-symbols-outlined text-sm">download</span>
    </a>

    <!-- Share -->
    <button id="share-button" class="bg-panel-border hover:bg-primary/20 text-white p-2 rounded-sm border border-primary/30 transition-all hover:shadow-glow flex items-center justify-center" title="Share">
        <span class="material-symbols-outlined text-sm">share</span>
    </button>
</div>

<script>
const shareBtn = document.getElementById('share-button');
shareBtn?.addEventListener('click', async () => {
    const shareData = {
    title: document.title,
    url: window.location.href,
    };
    try {
    if (navigator.share) {
        await navigator.share(shareData);
    } else {
        await navigator.clipboard.writeText(window.location.href);
        shareBtn.querySelector('span')!.textContent = 'check';
        setTimeout(() => {
        shareBtn.querySelector('span')!.textContent = 'share';
        }, 2000);
    }
    } catch (e) {
    // User cancelled share
    }
});
</script>
